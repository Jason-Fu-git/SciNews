<!doctype html>
<html>
{% load static %}
{% load dicFilter %}
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>搜索页</title>
    <link rel="stylesheet" type="text/css" href="{% static 'blog/searchStyle.css' %}">
    <script src="http://use.edgefonts.net/montserrat:n4:default;source-sans-pro:n2:default.js"
            type="text/javascript"></script>
</head>

<body>
<div id="mainwrapper">
    <header>
        <div id="logo">SciNews</div>
        <nav><a href="#" title="Link">首页</a> <a href="#" title="Link">列表</a><a href="#" title="Link">分类</a></nav>
    </header>
    <div id="content">
        <section id="mainContent">
            <h1>搜索结果</h1>
            <div id="search_area">
                <form id="search_form" method="post" action="{% url 'blog:search_submit' %}">
                    {% csrf_token %}
                    <input maxlength="50" id="search_input" name="search_input" value="{{ search_text }}">
                    <input id="submit_btn" type="submit" name="submit_btn" value="搜索">
                    <div id="area_wrapper">
                        <div id="radio_area">
                            <a>排序依据: </a>
                            <label>
                                {% if order_choice == '1' %}
                                    <input type="radio" id="order_by_time" name="order_group" value="1" checked>
                                {% else %}
                                    <input type="radio" id="order_by_time" name="order_group" value="1">
                                {% endif %}
                                <span>按时间排序(由新到旧)</span>
                            </label>
                            <label>
                                {% if order_choice == '2' %}
                                    <input type="radio" id="order_by_hot" name="order_group" value="2" checked>
                                {% else %}
                                    <input type="radio" id="order_by_hot" value="2" name="order_group">
                                {% endif %}
                                <span>按热度排序(由高到低)</span>
                            </label>
                        </div>

                        <div id="check_box_area_1">
                            <a>新闻来源:</a>
                            <label>
                                {% if "1" in from_choice %}
                                    <input type="checkbox" id="from_163" value="1" name="from_checkbox" checked>
                                {% else %}
                                    <input type="checkbox" id="from_163" value="1" name="from_checkbox">
                                {% endif %}
                                <span>网易新闻</span>
                            </label>
                            <label>
                                {% if "2" in from_choice %}
                                    <input type="checkbox" id="from_sino" value="2" name="from_checkbox" checked>
                                {% else %}
                                    <input type="checkbox" id="from_sino" value="2" name="from_checkbox">
                                {% endif %}
                                <span>新浪新闻</span>
                            </label>
                            <label>
                                {% if "3" in from_choice %}
                                    <input type="checkbox" id="from_ithome" value="3" name="from_checkbox" checked>
                                {% else %}
                                    <input type="checkbox" id="from_ithome" value="3" name="from_checkbox">
                                {% endif %}
                                <span>IT之家</span>
                            </label>
                        </div>

                        <div id="check_box_area_2">
                            <a>发布时间:</a>
                            <label>
                                {% if "1" in time_choice %}
                                    <input type="checkbox" id="last_3_months" value="1" name="time_checkbox" checked>
                                {% else %}
                                    <input type="checkbox" id="last_3_months" value="1" name="time_checkbox">
                                {% endif %}
                                <span>近三月</span>
                            </label>
                            <label>
                                {% if "2" in time_choice %}
                                    <input type="checkbox" id="last_year" value="2" name="time_checkbox" checked>
                                {% else %}
                                    <input type="checkbox" id="last_year" value="2" name="time_checkbox">
                                {% endif %}
                                <span>近一年</span>
                            </label>
                            <label>
                                {% if "3" in time_choice %}
                                    <input type="checkbox" id="earlier" value="3" name="time_checkbox" checked>
                                {% else %}
                                    <input type="checkbox" id="earlier" value="3" name="time_checkbox">
                                {% endif %}
                                <span>更早</span>
                            </label>
                        </div>

                        <div id="check_box_area_3">
                            <a>内容类型:</a>
                        </div>
                    </div>

                </form>
            </div>
            <div id="search_data">
                <span>共 <a id="search_num">{{ search_num }}</a> 条， 用时 <a
                        id="time">{{ search_time_ms }}</a> ms</span>
            </div>
            <table id="content_table">
                <thead id="table_head">
                <th width="70%">新闻</th>
                <th width="10%">作者</th>
                <th width="5%">阅读量</th>
                <th width="5%">评论数</th>
                <th>时间</th>
                </thead>
                <tbody id="table_body">
                {% for blog in blogs %}
                    <tr>
                        <td class="c_title"><a
                                href="{% url 'blog:detail' blog.id %}">{{ blog.title }}</a>
                            <span><br>{{ text_dic|key:blog.id  }}</span></td>
                        <td class="c_author">{{ blog.author_id }}</td>
                        <td class="c_read_num">{{ blog.read_num }}</td>
                        <td class="c_comment_num">{{ comment_num_dic|key:blog.id }}</td>
                        <td class="c_time">{{ blog.create_time }}</td>
                    </tr>
                {% endfor %}
                </tbody>

            </table>
            <div id="button_area">
                <!-- 页码按钮导航 -->
                {% if page_obj.has_previous %}
                    <a id="former_page" href="%3Fpage={{ page_obj.previous_page_number }}">上一页</a>
                {% endif %}

                <!-- 当前页为首页 -->
                {% if page_obj.number == 1 %}
                    <a class="this_page" href='%3Fpage=1'>1</a>
                    {% if paginator.num_pages > 3 %}
                        <a class="page_button" href='%3Fpage=2'>2</a>
                        <a class="page_button" href="%3Fpage=3">3</a>
                        <a class="dots">...</a>
                        <a class="page_button"
                           href="%3Fpage={{ paginator.num_pages }}">{{ paginator.num_pages }}</a>
                    {% elif paginator.num_pages == 3 %}
                        <a class="page_button" href="%3Fpage=2">2</a>
                        <a class="page_button" href="%3Fpage=3">3</a>
                    {% elif paginator.num_pages == 2 %}
                        <a class="page_button" href="%3Fpage=2">2</a>
                    {% endif %}

                    <!-- 当前页为尾页 -->
                {% elif page_obj.number == paginator.num_pages %}
                    <a class="page_button" href="%3Fpage=1">1</a>
                    <a class="dots">...</a>
                    <a class="page_button"
                       href="%3Fpage={{ paginator.num_pages }}">{{ paginator.num_pages }}</a>

                    <!-- 当前页为中间页 -->
                {% else %}

                    <!-- 前页不是1，添加省略号 -->
                    {% if page_obj.previous_page_number != 1 %}
                        <a class="page_button" href="%3Fpage=1">1</a>
                        <a class="dots">...</a>
                    {% endif %}


                    <a class="page_button"
                       href="%3Fpage={{ page_obj.previous_page_number }}">{{ page_obj.previous_page_number }}</a>
                    <a class="this_page" href="%3Fpage={{ page_obj.number }}">{{ page_obj.number }}</a>
                    <a class="page_button"
                       href="%3Fpage={{ page_obj.next_page_number }}">{{ page_obj.next_page_number }}</a>

                    <!-- 后页不是尾页，添加省略号 -->
                    {% if page_obj.next_page_number != paginator.num_pages %}
                        <a class="dots">...</a>
                        <a class="page_button"
                           href="%3Fpage={{ paginator.num_pages }}">{{ paginator.num_pages }}</a>
                    {% endif %}
                {% endif %}

                {% if page_obj.has_next %}
                    <a id="latter_page" href="%3Fpage={{ page_obj.next_page_number }}">下一页</a>
                {% endif %}


            </div>
            <div id="input_area">
                <form id="number_form" method="post" action="{% url 'blog:search_to' content %}">
                    {% csrf_token %}
                    <a id="page_label">page:</a>
                    <input id="page_number" name="page_number" type="number" value="{{ page_obj.number }}">
                    <input id="submit_button" type="submit" value="GO">
                </form>
            </div>

        </section>
        <footer>

        </footer>
    </div>
    <div id="footerbar"></div>
</div>
</body>
</html>
